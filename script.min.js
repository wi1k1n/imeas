(function(){function a(){ra={x:1,y:1};const a=h.width*ra.x;if(a>pa){const b=a/pa;ra.x/=b,ra.y/=b}const b=h.height*ra.y;if(b>w){const a=b/w;ra.x/=a,ra.y/=a}}function b(){qa={x:(pa-h.width*ra.x)/2,y:(w-h.height*ra.y)/2}}function c(){u(),a(),b(),x()}function d(a){function b(){ta=null,S(ma),na.innerHTML=""}function c(){switch(ta=a,T(ma),ta){case"ruller":wa=[[]],xa=[[]];break;default:}}ta===a?"ruller"===ta?0===wa[wa.length-1].length?b():o():b():c(),x()}function e(a){a=a??[null,null];const b=a[0]??0,c=a[1]??0,d=null===a[0]?xa.length:b+1;for(let e=b;e<d;e++){const b=e;if(null===a[1]){xa[b]=[];for(let a=0;a<wa[b].length-1;a++)xa[b].push(R(wa[b][a],wa[b][a+1]))}else 0<c&&(xa[b][c-1]=R(wa[b][c-1],wa[b][c])),c<wa[b].length-1&&(xa[b][c]=R(wa[b][c],wa[b][c+1]))}}function f(){if(ua)console.log("dragging with shift");else{const a=[0,ea,ca,ca+ea,da];let b=a.concat([.25*ca,.75*ca,1.25*ca,1.75*ca]);const c=wa.length-1,e=wa[c].length-1,f=wa[c][e];if(f){if(0<e){const d=wa[c][e-1];let g=Math.atan2(f.y-d.y,f.x-d.x);0>g&&(g+=da),b=b.concat(a.map(b=>(b+g)%da))}b.sort();let g=Math.atan2(Ca.y-f.y,Ca.x-f.x);0>g&&(g+=da);let h=0;for(;h<b.length&&!(g<b[h]);h++);h||(h=1),g-b[h-1]<b[h]-g&&h--;const i=R(f,Ca);ya.x=f.x+Math.cos(b[h])*i,ya.y=f.y+Math.sin(b[h])*i}}}function g(a){a=a??!1,a?(wa.splice(va[0],1),xa.splice(va[0],1)):(wa[va[0]].splice(va[1],1),2>wa[va[0]].length?(wa.splice(va[0],1),xa.splice(va[0],1)):e([va[0],null])),va=null,x()}function i(a){if("ruller"===ta){function b(a,b,c){wa[a].splice(b,0,{...c}),e()}if(va=p(),!va)1===a.buttons&&(a.shiftKey?(f(),b(wa.length-1,wa[wa.length-1].length,ya)):b(wa.length-1,wa[wa.length-1].length,Ca));else if(1!==a.buttons)4===a.buttons&&g(a.shiftKey);else if(a.ctrlKey)b(va[0],va[1],Ca),ua={x:0,y:0};else{const a=wa[va[0]][va[1]];ua={x:(Ba.x-qa.x)/ra.x-a.x,y:(Ba.y-qa.y)/ra.y-a.y}}}A()}function j(){}function k(a){"ruller"===ta&&(ua&&(wa[va[0]][va[1]].x=(a.x-qa.x)/ra.x-ua.x,wa[va[0]][va[1]].y=(a.y-qa.y)/ra.y-ua.y,e(va)),za&&f(),x(),A())}function l(){"ruller"===ta&&(ua&&e(va),va=null,ua=null)}function m(a){"ruller"===ta&&16===a.keyCode&&(za=!0,f(),x())}function n(a){"ruller"===ta&&16===a.keyCode&&(za=!1,x())}function o(){1<wa[wa.length-1].length?(wa.push([]),xa.push([])):wa[wa.length-1]=[]}function p(){let a=null,b=1/0;for(let c=0;c<wa.length-1;c++){const e=wa[c];for(let f=0;f<e.length;f++){const g=R(Ba.x,Ba.y,e[f].x*ra.x+qa.x,e[f].y*ra.y+qa.y);g<=aa&&(a=[c,f],b=g)}}return a}function q(){"ruller"===ta&&o()}function r(){ia.imageSmoothingEnabled=!ia.imageSmoothingEnabled,x()}function s(){sa=!sa,x()}function t(){if(ia.save(),"ruller"===ta){const a=wa[wa.length-1];for(let b=0;2>b;b++){function c(a,c,e){e=e??R(a,c);const f=e.toFixed(1),g=ia.measureText(f),h=a;if(g.width+12>e*ra.x)return!1;const i=c,j=(h.x+i.x)/2*ra.x+qa.x,k=(h.y+i.y)/2*ra.y+qa.y;ia.save(),ia.translate(j,k);let l=Math.atan2(i.y-h.y,i.x-h.x);return Math.abs(l)>ea&&(l-=ca),ia.rotate(l),b?ia.fillText(f,-g.width/2,-4):ia.strokeText(f,-g.width/2,-4),ia.restore(),!0}ia.strokeStyle=b?"#ffffb3":"black",ia.fillStyle=ia.strokeStyle,ia.lineWidth=b?1:2.8;const d=b?1.3:2.2;ia.font="10px sans serif",ia.lineCap="round",ia.lineJoin="round",ia.beginPath();for(let a=0;a<wa.length;a++){const b=wa[a];if(b.length){ia.moveTo(b[0].x*ra.x+qa.x,b[0].y*ra.y+qa.y);for(let a=1;a<b.length;a++)ia.lineTo(b[a].x*ra.x+qa.x,b[a].y*ra.y+qa.y)}}for(let a=0;a<xa.length;a++){const b=xa[a];if(!b.length)continue;const d=wa[a];for(let a=0;a<b.length;a++)!c(d[a],d[a+1],b[a])}if(a.length){const b=a.length-1;ia.moveTo(a[b].x*ra.x+qa.x,a[b].y*ra.y+qa.y);let d={...Ca};za&&(d=ya),ia.lineTo(d.x*ra.x+qa.x,d.y*ra.y+qa.y),c(a[b],d)}ia.stroke();for(let b=0;b<wa.length;b++){const c=wa[b];for(let e=1;e<c.length-(a.length&&b===wa.length-1?0:1);e++)ia.beginPath(),ia.arc(c[e].x*ra.x+qa.x,c[e].y*ra.y+qa.y,d,0,da),ia.fill()}}if(0===a.length){let a=ua?va:null;if(a||(a=p()),a){const b=wa[a[0]][a[1]],c={x:b.x*ra.x+qa.x,y:b.y*ra.y+qa.y};ia.fillStyle="yellow",ia.strokeStyle="#000000",ia.lineWidth=1,ia.beginPath(),ia.arc(c.x,c.y,ba,0,da),ia.globalAlpha=1,ia.fill(),ia.globalAlpha=1,ia.stroke()}}}ia.restore()}function u(){}function v(a){let b=0>a.deltaY?fa:ga;const c=h.width*ra.x*b,d=h.height*ra.y*b;if(c>U||c<W||d>V||d<X)return;let e={x:a.x,y:a.y};(a.altKey||a.x<qa.x||a.x>qa.x+h.width*ra.x||a.y<qa.y||a.y>qa.y+h.height*ra.y)&&(e={x:qa.x+h.width*ra.x/2,y:qa.y+h.height*ra.y/2}),ra.x*=b,ra.y*=b,qa.x=e.x-(e.x-qa.x)*b,qa.y=e.y-(e.y-qa.y)*b,x()}function x(){const a=-Math.min(qa.x/ra.x,0),b=-Math.min(qa.y/ra.y,0),c=Math.min((pa-qa.x)/ra.x,h.width)-a,d=Math.min((w-qa.y)/ra.y,h.height)-b,e=Math.max(qa.x,0),f=Math.max(qa.y,0),g=c*ra.x,i=d*ra.y;ia.clearRect(0,0,pa,w),ia.drawImage(h,a,b,c,d,e,f,g,i),sa&&(ia.save(),ia.lineWidth=1,ia.strokeStyle="black",ia.beginPath(),ia.rect(e-.5,f-.5,g+1,i+1),ia.stroke(),ia.restore()),t(),z()}function y(a){const b=Ca.x+.5,c=Ca.y+.5;ja.innerHTML=b.toFixed(0)+"; "+c.toFixed(0)+"<br>"+a.x.toFixed(0)+"; "+a.y.toFixed(0)}function z(){const a=h.width+"x"+h.height;let b=(100*ra.x).toFixed(2)+"%";ra.x!==ra.y&&(b=(100*ra.x).toFixed(2)+"% x "+(100*ra.y).toFixed(2)+"%"),ka.innerHTML=a+" | "+b}function A(){let a="";for(let b=xa.length-1;0<=b;b--)xa[b].length&&(a+=b+1+": "+xa[b].reduce((b,a)=>b+a).toFixed(2)+"<br>");na.innerHTML=a.substring(0,a.length-4)}function B(){}function C(a){2===a.buttons&&(Aa.x=Da.x-qa.x,Aa.y=Da.y-qa.y)}function D(a){2===a.buttons&&(qa.x=a.x-Aa.x,qa.y=a.y-Aa.y,x())}function E(){}function F(a){return Ba={x:a.x,y:a.y},Ca={x:(a.x-qa.x)/ra.x,y:(a.y-qa.y)/ra.y},Ea=!0,Da={x:a.x,y:a.y},i(a),L(a),!1}function G(a){return Ba={x:a.x,y:a.y},Ca={x:(a.x-qa.x)/ra.x,y:(a.y-qa.y)/ra.y},Fa?E(a):(j(a),B(a)),Ea=!1,Fa=!1,l(a),L(a),!1}function H(a){return Ba={x:a.x,y:a.y},Ca={x:(a.x-qa.x)/ra.x,y:(a.y-qa.y)/ra.y},Ea&&(Fa?D(a):(Math.abs(a.x-Da.x)>Y||Math.abs(a.y-Da.y)>Y)&&(C(a),Fa=!0)),k(a),y(a),L(a),!1}function I(a){return v(a),!1}function J(a){switch(a.key){case"?":Q();break;default:m(a);}}function K(a){n(a)}function L(a){a.preventDefault!=null&&a.preventDefault(),a.stopPropagation!=null&&a.stopPropagation()}function M(){$("#inp_file").trigger("click")}function N(a){a.target.files&&a.target.files.length&&(h.onload=c,h.src=URL.createObjectURL(a.target.files[0]))}function O(){navigator.clipboard.read().then(a=>{for(const b of a)for(const a of b.types)_.includes(a)&&b.getType(a).then(a=>{h.src=URL.createObjectURL(a)}).catch(a=>console.log("getType() => ",a))}).catch(a=>console.log("read() =>",a))}function P(){Q()}function Q(){alertify.alert("<table class=\"help-table\">\n<tr><td><b>RMB</b></td><td> - drag image</td></tr>\n<tr><td><b>wheel</b></td><td> - zoom to cursor</td></tr>\n<tr><td><b>alt + wheel</b></td><td> - zoom to center</td></tr>\n<tr><td><b>r</b></td><td> - ruller tool</td></tr>\n<tr><td><b>LMB</b></td><td> - new node / drag node</td></tr>\n<tr><td><b>shift</b></td><td> - constrain new node</td></tr>\n<tr><td><b>ctrl+LMB \u2192 node</b></td><td> - add new node</td></tr>\n<tr><td><b>MMB / d \u2192 node</b></td><td> - delete node</td></tr>\n<tr><td><b>shift+MMB \u2192 node</b></td><td rowspan=\"2\"> - delete whole chain</td></tr>\n<tr><td><b>shift+d \u2192 node</b></td></tr>\n<tr><td><b>esc</b></td><td> - cancel current ruller chain</td></tr>\n<tr><td><b>o</b></td><td> - place image to center</td></tr>\n<tr><td><b>space</b></td><td> - reset position and scale</td></tr>\n<tr><td><b>i</b></td><td> - toggle interpolation</td></tr>\n<tr><td><b>b</b></td><td> - toggle border</td></tr>\n<tr><td><b>? / h</b></td><td> - show this help</td></tr>\n<tr><td><b>ctrl + v</b></td><td> - paste image from clipboard (only in Chrome)</td></tr>\n</table>").setting({basic:!0,closableByDimmer:!0,movable:!1,transition:"fade"})}function R(a,b,c,d){if(4===arguments.length)return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b));return 2===arguments.length?Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y)):void console.error("invalid parameters")}function S(a){a.classList.contains("hidden")||a.classList.add("hidden")}function T(a){a.classList.contains("hidden")&&a.classList.remove("hidden")}const U=8192,V=8192,W=8,X=8,Y=1,Z=1.1,_=["image/png","image/jpeg","image/bmp"],aa=8,ba=4,ca=Math.PI,da=2*Math.PI,ea=.5*Math.PI,fa=Z,ga=1/Z,ha=document.getElementById("cnv_editor"),ia=ha.getContext?ha.getContext("2d"):null;if(!ia)return console.error("Could not get canvas context. Exiting...");ha.focus();const ja=document.getElementById("divMousePos"),ka=document.getElementById("divImgInfo"),la=document.getElementById("divHelp"),ma=document.getElementById("divTools"),na=document.getElementById("divToolsDistance"),oa=document.getElementById("div_canvas");ha.width=2*oa.clientWidth,ha.height=2*oa.clientHeight;const pa=ha.width/2,w=ha.height/2;ia.scale(2,2),ia.imageSmoothingEnabled=!1;let h=new Image,qa={x:0,y:0},ra={x:1,y:1};h.onload=c,h.src="data:image/png;base64,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";let sa=!0,ta=null,ua=null,va=null,wa=[],xa=[],ya={x:0,y:0},za=!1,Aa={x:0,y:0},Ba={x:0,y:0},Ca={x:0,y:0},Da=null,Ea=!1,Fa=!1;(function(){document.getElementById("inp_file").onchange=N,window.addEventListener("paste",O,!1),ha.onmousedown=F,ha.onmouseup=G,ha.onmousemove=H,ha.onwheel=I,document.onkeydown=J,document.onkeyup=K,document.oncontextmenu=L,ha.oncontextmenu=L,la.onclick=P})(),function(){hotkeys("ctrl+o,esc,space,o,r,i,d,shift+d,b,h",function(c,e){switch(e.key){case"ctrl+o":c.preventDefault(),M();break;case"esc":q();break;case"space":a(),b(),x();break;case"o":b(),x();break;case"i":r();break;case"b":s();break;case"r":d("ruller");break;case"d":va=p(),va&&g();break;case"shift+d":va=p(),va&&g(!0);break;case"h":Q();break;default:console.log(c);}})}();const Ga=document.getElementById("divDebug")})();